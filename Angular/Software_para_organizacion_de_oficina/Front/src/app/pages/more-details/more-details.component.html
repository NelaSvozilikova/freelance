<form class="form-horizontal" action='' method="POST">
   <div class="row page-title-row">
      <div class="col-3">
      <h1>Detalles</h1>
      </div>

      <div class="col-2">
         <button (click)="do()" type="button" class="btn btn-primary edit-client-button client-button"> 
            Editar
         </button>
      </div>
      <div class="col-2">
         <button (click)="do()" (click)="saveMasDetalles()" type="button" class="btn btn-success save-client-button client-button" [disabled]="buttonState()"> 
            Guardar
         </button>
      </div>
      <div class="col-2">
         <button (click)="do()" type="button" class="btn btn-danger cancel-client-button client-button" [disabled]="buttonState()"> 
            Cancelar
         </button>
      </div>
      <div class="col-1 offset-md-2">
         <button [routerLink]="['/home']" type="button" class="btn btn-secondary"> 
            Volver
         </button>
      </div>
   </div>

   <div class="row more-details-row">
      <div class="col-6">
         <h4 class="more-details-title">Datos cliente</h4>
      </div>
   </div>

   <div class="row details-data-row">
      <div class="col-4">
         <div class="detail-title">Nombre</div>
         <input 
            #nombre 
            type="text" 
            class="form-control" 
            value="{{cliente.nombre}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('nombre', nombre.value)">
      </div>
   </div>     
   
   <div class="row details-data-row">
      
      <div class="col-4">
         <div class="detail-title">Telefono 1</div>
         <input
            #telefono1 
            type="number" 
            class="form-control" 
            placeholder="Telefono 1" 
            value="{{cliente.telefono1}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('telefono1', telefono1.value)">
      </div>

      <div class="col-4">
         <div class="detail-title">Telefono 2</div>
         <input
            #telefono2 
            type="number" 
            class="form-control" 
            placeholder="Telefono 2" 
            value="{{cliente.telefono2}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('telefono2', telefono2.value)">
      </div>

      <div class="col-4">
         <div class="detail-title">Telefono 3</div>
         <input
            #telefono3 
            type="number" 
            class="form-control" 
            placeholder="Telefono 3" 
            value="{{cliente.telefono3}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('telefono3', telefono3.value)">
      </div>
      
   </div>     

   <div class="row details-data-row">
      
      <div class="col-4">
         <div class="detail-title">Email 1</div>
         <input
            #email1 
            type="number" 
            class="form-control" 
            placeholder="Email 1"
            value="{{cliente.email1}}"
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('email1', email1.value)">
      </div> 

      <div class="col-4">
         <div class="detail-title">Email 2</div>
         <input
            #email2 
            type="number" 
            class="form-control" 
            placeholder="Email 2"
            value="{{cliente.email2}}"
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('email2', email2.value)">
      </div>

      <div class="col-4">
         <div class="detail-title">Email 3</div>
         <input
            #email2 
            type="number" 
            class="form-control" 
            placeholder="Email 2"
            value="{{cliente.email2}}"
            [disabled]="buttonState()" 
            (change)="addMasDetalleCliente('email2', email2.value)">
      </div>
      
   </div>     

   <div class="row more-details-row">
      <div class="col-6">
         <h4 class="more-details-title">Datos trabajo</h4>
      </div>
   </div>

   <div class="row details-data-row">
      
      <div class="col-4">
         <div class="detail-title">Fecha inicio del Trabajo</div>
         <input 
            type="date" 
            class="form-control" 
            value="{{trabajo.fecha}}" 
            disabled>
      </div>

      <div class="col-8">
      </div>

      <div class="col-4">
         <div class="detail-title">Trabajo</div>
         <input 
            #tema
            type="text" 
            class="form-control" 
            value="{{trabajo.tema}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('tema', tema.value)">
      </div> 

      <div class="col-4">
         <div class="detail-title">Carrera</div>
         <input 
            #carrera
            type="text" 
            class="form-control" 
            value="{{trabajo.carrera}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('carrera', carrera.value)">
      </div>

      <div class="col-4">
         <div class="detail-title">Universidad</div>
         <input 
            #universidad
            type="text" 
            class="form-control" 
            value="{{trabajo.universidad}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('universidad', universidad.value)">
      </div> 
   </div>  

   <div class="row details-data-row">
      <div class="col-4">
         <div class="detail-title">Donde entero</div>
         <input 
            #lugarEntero
            type="text" 
            class="form-control" 
            placeholder="Donde entero" 
            value="{{trabajo.dondeSeEntero}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('dondeSeEntero', lugarEntero.value)">
      </div>

      <div class="col-4">
         <div class="detail-title">Proxima entrega</div>
         <input 
            #fechaEntrega
            type="date" 
            class="form-control" 
            value="{{trabajo.fecha_entrega}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('fecha_entrega', fechaEntrega.value)">
      </div>   

      <div class="col-4">
         <div class="detail-title">Asesor</div>
         <input 
            #asesor
            type="text" 
            class="form-control" 
            value="{{trabajo.asesor}}" 
            [disabled]="buttonState()" 
            (change)="addMasDetalleTrabajo('asesor', asesor.value)">
      </div> 
   </div>  

    <div class="row" style="margin-top: 40px;" > 
      <div class="col-4" style="padding: 10px;padding-left: 40px;display: flex;" >
         <b>Requerimientos</b>
               <div>
         <a style="padding: 0px;padding-left: 15px;" class="btn" (click)="showDialogAddReq = true" >   
         <img style="width: 20px" src="./assets/reque.png" alt="Flowers in Chania">
         </a>
      </div>
      </div>

   </div>

   <div class="row" style="margin-left: 10px;">
      <div class="col-8" style="font-size: 18px;" >

         <table class="table table-new table-striped">
            <thead>
               <tr class="requirements-columns" >
                  <th>  Fecha de carga
                     <a (click)="sortNombre()" class="btn clients-sort">
                        <img class="sort-img" src="./assets/sort.png" alt="">
                     </a>
                  </th>
                  
                  <th>
                     Requerimiento
                  </th>
                  <th></th>
                  <th></th>
               </tr>
            </thead>
            
               <tbody class="centro" *ngIf="requerimientos?.length > 0" >
                  <tr *ngFor="let req of trabajo.requerimientos" class="requirements-columns" (dblclick)="showDialogAddReq = !showDialogAddReq">
                     <td>{{ req.fecha | date:'dd-MM-yyyy'}}</td>
                     <td>{{req.texto}}</td>
                     <td hidden>
                        <a class="btn clients-actions"  (click)="showDialogAddReq = true" >
                          <div class="tooltip">              
                            <img class="clients-img" src="./assets/reque.png" alt="">
                            <span class="tooltiptext">Editar</span>
                          </div>
                        </a>
                     </td>
                     <td hidden>
                        <a class="btn clients-actions"  (click)="showDialogDelete = true" >
                          <div class="tooltip">              
                            <img class="clients-img" src="./assets/trash.png" alt="">
                            <span class="tooltiptext">Eliminar</span>
                          </div>
                        </a>
                     </td>
                  </tr>
               </tbody>

               <tbody class="centro" *ngIf="requerimientos?.length == 0" >
                  <tr>
                     <td></td>
                     <td style="color: silver;" >Para agregar requerimientos debes hacer clic en el icono superior ... </td>
                     <td></td>
                     <td></td>
                     <td></td>
                  </tr>
               </tbody>

         </table>
      </div>
   </div>

</form>




<!-- ###########################   AGREGAR REQUERIMIENTO   ############################### -->
<change-state [(visible)]="showDialogAddReq">
<h2 style="margin: 10px;margin-bottom: 20px;" >Agregar Requerimiento</h2>
<div class="col-12" style="margin-bottom: 20px;">
   <input #reqq type="text" class="form-control" placeholder="Requerimiento">
</div>
<div class="row">
   <div class="col-6"> 
      <button (click)="addReq(reqq.value)" (click)="showDialogAddReq = !showDialogAddReq" class="btn" style="width: 100%;background: #72C585" >Agregar</button>
   </div>
   <div class="col-6"> 
      <button (click)="showDialogAddReq = !showDialogAddReq" class="btn" style="width: 100%;background: #E87B85" >Cancelar</button>
   </div>
</div>
</change-state>

<!-- ###########################  ELIMINAR REQUERIMIENTO   ############################### -->
<change-state [(visible)]="showDialogDelete">
<h2 style="margin: 10px;margin-bottom: 20px;" >Eliminar Requerimiento</h2>
<div class="col-12" style="margin-bottom: 20px;">
   Esta seguro que quiere eliminar este requerimiento?
</div>
<div class="row">
   <div class="col-6"> 
      <button (click)="delteReq(reqq.value)" (click)="showDialogddDelete = !showDialogDelete" class="btn" style="width: 100%;background: #72C585" >Agregar</button>
   </div>
   <div class="col-6"> 
      <button (click)="showDialogDelete = !showDialogDelete" class="btn" style="width: 100%;background: #E87B85" >Cancelar</button>
   </div>
</div>
</change-state>